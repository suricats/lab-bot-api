language: java
before_install:
- sudo apt-get update
- sudo apt-get install sshpass
install: mvn install
jdk:
- oraclejdk8
env:
  global:
  - secure: ohlA89p0Zq7qCt872UpmuzhRfHyRHV6pegEBq0mWkbjIGW+f6pRsk6X9qHataNHPls4UMGKSmHW6g5EKqB4hf84xycvRqUNPrNC7BPf0kTChzCH5VK+VGcY2Gq/nMMWQ/pQQBc5ufv/XNlNWGmt8bxKOdV41282fk27D5dsZA2HYBq+oHNJJhDQ9P6MXO7GIr/jtu4LgEP7c7WQ4kmOtZmTuEsU8Z/xP8mBm+A2l3qc/PehzLt9anjs72FnL8Vnp+dSk7Zcs+sxixMKcQt9v6VnHxTbP/GczDl3UMVx9zkPpfSG6jgLfuk1dsa1avC/dYU8UmXfrtAbwVRGz+QuGr1z5m9nDV6A40a2LZh0tKubKduhAL+k5m6ykgDWgssknwz1GamOiRwqWGFDwICd8joQEzhdBA7swLrr+N11VTKzpWOYiWjLz9H2caD/exCYfibrjf02LG79U5URBchEPxJY3Lr1z1gTDPsHZcOWYvHKdYnDkk1GiKkdWWXO7lrAtRwLdxdtZfZMntESLnlcyxYisRrKLNnTkdxQfqvLd6yssB6NLAX4+vo2BgAPVT1XRi4riTNQkA2NTm5IkvrjMHlUysdzvg0sMg3p4WrCmAyvGAz8kg/9+U2xWkH+YWA/YqDKnao9hTvD5HgkcSq+VT8Oa1D7g74SbwhO5pZTddho=
  - secure: SNBPwZNLLRWPAZnrbZ0HMsmQAodVgBnjMRjWRNuFNYZiH4G9Sil5m1g/V95AkPATvvEkfbCoN4y5cRymaQjNFjq6Z3GMm8WfOXUBBVkRvLOFautSxdh2SfaXZV/O9XVaKjIUjrBwAkPQAcY1lXtme/vDHTRzxlRZJR5/KNHe9bbmPKw17CVb4YhaLj6JcesvQL4ewKyQPEKvgLGgcQBQ6r7RrjVmPeQM3CkftGwYnGTgg+p7RJjrX1PAwNBhtstZ0vhzA3Hc1z5xZqPop8aEkCGxs+4hr7vomxKN4DjfcUQMCXKYbtznZiuRYeaILkBxYx9BbTtgSdn3pw0PX9PMnMM8ercodSYuu2wh0IY3QXnl/1Xdti4Z9ii0xq+RoyvxUsdXWA5hKT2Ftf0zT+wprsnDQ22ohOOtmWQF5q9MkfMeW0H7VSv1BcH4aza6gVrkICRiWAjU3SVGdNdRlmuexlBB8C/x/Z14uPhxD8cChpat8ErFS4CCg68JbpP/NRDZ/NtRxZpL7tEfloCOz+PPNm2wXeUVdFlISQgMSapXuPlIE2p/lAQrH/1pGWVBWxtrF9UTxWDQ2mVvq4fijJtDP8v50m75rZ6udT7mXUT8zdOiwBVnftelLGfKIo/Ha714D6HD8aZfFUWLher+4R0+v8jPZho1NtNbtwAybVE2jA8=
  - secure: sbsNg0HS/9xcGgnAKuA+QJ+2+oY+kE1vZm+vZSJ9hOKlj5al70qqVyOuK0wypCnh+XPBAr/ZmksFhKyU+v4fVtJjd2XaCmKhYRplaU5yigmQozn2LZB38UXFUnf1OQz4UB3I4jbs8ftFqMEWF1UKxnxnkAm8MQqJZdALibF40yx3uag5IkgcP7b5WoMtuQwsBIYmFkLpF+Kr90UtULMt6nRKdV+L5ZZiqAlNC6q14e/v8Sbx1z69TXqPKiUQnhCpiyNJEQAupY1pu2p+GLZwigtehuQ+LxxlI2clFukt8pHgthxdyVloVwN1PxMPHrD8/fIgPQFs96dwBibOzDwjzobSMIzjAg5OxxqOecxeV6j7g6UrYgLj/11w7Q1WHdla7ITI6RhHj7UP+RD5Vk3rHCj28QuqQvSL9BQ+l7jxwLW3nKbkf4Yz8CFdQnwLn4ORQKGEvucosUUSgp/k2Pqt9wUYr9hRzYoXQsNZDiTLqcz/fkKFY8CiKgCjtURKsM2QLCC1RigKOvNQdm6LTa44+PQT2Hr+NY8DIWCVFXCP/44FU4huM03TupEqGsnoTQ4XmRByFYt0yCuRcuv7Cxs5GMnONjaMMnctTJ/H1fFEw0klW7e2+g0/pKxUUbDLTLN8StXZsVFuwiNy6k5A2j4x4k+0dPNIG8jHKKv5MMsfJm8=
after_success:
- sshpass -p "$password" ssh -o StrictHostKeyChecking=no travis@$IP ./killMock.sh
- sshpass -p "$password" scp -v -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null
  target/mock-api-1.0.jar travis@$IP:/home/travis
- sshpass -p "$password" ssh -o StrictHostKeyChecking=no travis@$IP java -jar -Dserver.port=$PORT
  mock-api-1.0.jar &
- sshpass -p "$password" ssh -o StrictHostKeyChecking=no travis@$IP cd
