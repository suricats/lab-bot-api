language: java
before_install:
- sudo apt-get update
- sudo apt-get install sshpass
install: mvn install
jdk:
- oraclejdk8
env:
  global:
  - secure: T/tUqtF5MKOwx0oMP8lRuds0mCjhfc8xrly9IKEPXlmBCBHXqBCXfYpf8aj4tJgCj9Y788CgcV7btKKE6f9svGHLkJw+rR57CUxpTtT/FFRbpSNGCkMF92JMKb17lR0Nsstt/LygVzTQMuXX2ycSE5lsNheQgwxcjMScB4cwKuJIoP92uXdF/OKCAHVdKNd8eyA+HLR0CIuCuRKLS8TiRAcYeDYtiMNSkfOOH/JyQhDELwLwYJ2WvUiy0bL47rG7H60i1+iV5b7kO8LhSEundN0T5e68UMpTcG8tapdemcC+ZYtJmqM0XWDBuUZ296tJBEXN2QYkg9Px3tJ7eEHc5VGJL4bCL55sPnt3/zIXdXhRNxvFQxpz22o4jqL2ASHfUIw2Sgbi1D7jB8LlKyEWKN6aOFXdzP03Od/yu5ZYfLWitZUyL0BkKirde58Ks/OHFEJqUOc2hBhCWVeO6dbrpVLKqBjot3tz6DpvhlEGJkLAaH+vvpkEJAYR56PPXRFvQKcj5tpExenErnKkta+GQ/ehKwodpfjhZWeyPx53DvNImk2dbj4zaLFy+ghK/V1r+n72tTQ02MrFA2SHiVQFo4q1R8/wHW5QjEipKAOiVAyftxZk/jtaeNxwJMjvWzBV/8JpgJJf96n1EV8S5h99kuLPYf/2Zoc0dHr7G0lt0hw=
  - secure: ebnZArnThDhoN6BftauM6YWObwOWQt5fRTFmpNMd0Y6FNGrLYmh5eNBvrkCYRtjhAynYBOSnQrY/B2LpDE8wl7SlHqBnRbTdCMONxKcvrOJ9YkhUTVAuLgx/zP8/NY/IKY1/fX4ky2E4Yppzz3cw/5w/BzAXCytd6FMmYc0V7pQa4+lkq+TWlXpbONi8Zd0ct4kriJu6/HjmrFT3m9dx+08KkegBE2Md+m7i73w4UKTc6rZUfTfYLr8//+ewB0/yGPDZ48BtQYD4Od7CsVSvH2Lh5HiSd3ahRRwAR9mrjOcTOwueiNp/CNEVxw9y64eyZfulf/kR7fIilFTVmgrB0SCbQvFqu5RrDN5AzpEujV54yVK0H7Fx8VxJDMqibUqkJ8GwhUQRoj6UoIjhHmBg1Qh/HBlCHP4u3qrOJlCPQ5mLwMgCOc3C68CD3zzZUVD3IqUdso1PdvcpkWv4hikDXu26KoZfjR9giyDrdYI9XKlP+V1y7A+TBzgYgNI4lkHhNlC5jKPbSorTrVN1B71zR8FxVaaCJnOV/h1VMGxfE4s8fRTULcFnwBuDTQHW6S4Qnbm2aE7sLuyvtOiM1dxEqHyDKWczrSdUyf0KEyXBWtAE3iAJ7LlgG8ahdPCWSnMTSSWK297LtDZmVGOIigwO+8PnvVl/P3G0S663JJWyG2k=
  - secure: vKRK8uNV9CmwH0TrSYwjpQvdYNDTbzC0fReGSuzJ8lqXxcefnV4xz40aaMHyhnUipPK6nA6xP4pPkqBm1DekHW/VfDrJ/4Nn8qW06nM80zB1eUOBC3SN23HJqT7tN1mVpxUQPSXCj/cSGZ990HypmwegzO1tAzMTbw0CvH42/2hPfo3SLyxEBpjKjJ5Tzigr1R58wpDQZHjULfMhar5nk9zxkH3Y8EgbBFsrijoKte2+ps5gWP0zQvVdSsd+H1dGlXz3WewqqvaADh8Fgv+Q7WxXoQy8gnHsZZE5/BHc1+VWKZZThJsbT/yXxjFowVVaIxXNdi1I52lbYW8MFTikE5LgD/coXaF4eYMIGxE9AatMSe/EaReLNUvywC4/RzziSbEoMJOZkDz3RgcLo/YCqNvb5nLnS52G+w9M/QeMqbyY+qAO6By9KuGTcxzKgkgO3vKpEHfPkUIEYKk07T6uR2VEU3GURA3hOHeVZ6WUqSevObWx4MTcO24RdleSX3ANfQZmZOnCDhkLJyiBzvMHjJi4+RZWQiq2zPWxfYhRPJibKBLK65c++uSyUGctL1obMfQ/kv8sln3IAnoT5i5uT3FLhj8rD8+M7tWKWip9f7fsZWkz1uzpaiMuA/ZqwXuJQ4Gq9dftt9VeBRo3eDRaXMTVodr4zJ0n0A3Jx2owg10=
  - secure: g8MwftTTQsxtZou1PzR+XKsTmOk8YEvki53oRVfH2p5zvS/vKjFhFMyhGrc81MkLrfPxJXeYrJ82jInoXEnPbtFioep50qqRASHNEDE0PlviUKBQJXV7avcsFbLjlx9XbsFIJSSiceG8V7oDob6cb6KMeilZBAYZAW8SgRlFHsExY8cD+iCiglay9xCZsWdcBArXhKvehjMjNdpVJzygNKCv2eWXHl9bMPum4wruC28AJUnOhK/cH/UjgNkwqOeyhUXHmlw5yZUu7Yxf+YzkeBaVuKL7uzPgZBH3nFynk24UT+oILVM8XcDyow7Wti+bDpDGiXdMycj6IXNxBaT5xaMQUhlA+1Nei5Url8KcufLtJenP7mKLt/kzMaFjaP8UdIySx2HPvIraPZBVFq52th2FhmqeBTjR0ylz2q5chm6BYgOUvg8gAC8MInmuWJaR/qceHiVmFbqHEkptfuZInIoaH4TP/NJDxTg7E8q+pN+oOwUsbxSd23AEfVZX/JaN3q9xtBdHz1YCAym/AebCI86SSaDHBNGwrP6W2ZrIWv9I/dzcqFqj3ZlyazuQ4K9pwsdn2fgkCknc2Uy5/2anisR0iexMCPwAqyN0atTONMtx28j90sA8Gefli/sFzN3myJEffitKWDKz5dg4TZbxCZACB142YGRh/4gELH7aAyg=
after_success:
- sshpass -p "$password" ssh -o StrictHostKeyChecking=no $login@$IP ./killMock.sh
- sshpass -p "$password" scp -v -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null
  target/mock-api-1.0.jar $login@$IP:/home/travis
- sshpass -p "$password" ssh -o StrictHostKeyChecking=no $login@$IP java -jar -Dserver.port=$PORT
  mock-api-1.0.jar &
- sshpass -p "$password" ssh -o StrictHostKeyChecking=no $login@$IP cd
